<ion-header>
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-menu-button></ion-menu-button>
    </ion-buttons>
    <ion-title>Timeline</ion-title>
    <ion-buttons slot="end">
      <ion-button fill="clear" (click)="zoomInTimeline()" title="Zoom In">
        <ion-icon name="add"></ion-icon>
      </ion-button>
      <ion-button fill="clear" (click)="zoomOutTimeline()" title="Zoom Out">
        <ion-icon name="remove"></ion-icon>
      </ion-button>
      <ion-button fill="clear" (click)="moveToNow()" title="Go to Now">
        <ion-icon name="time"></ion-icon>
      </ion-button>
      <ion-button fill="clear" (click)="refreshTimeline()">
        <ion-icon name="refresh"></ion-icon>
      </ion-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content>
  <div class="timeline-controls">
    <ion-item>
      <ion-label>From:</ion-label>
      <ion-datetime 
        [(ngModel)]="fromDate" 
        (ionChange)="onDateRangeChange()"
        presentation="date-time"
        size="cover">
      </ion-datetime>
    </ion-item>
    
    <ion-item>
      <ion-label>To:</ion-label>
      <ion-datetime 
        [(ngModel)]="toDate" 
        (ionChange)="onDateRangeChange()"
        presentation="date-time"
        size="cover">
      </ion-datetime>
    </ion-item>
  </div>

  <div *ngIf="isLoading" class="loading-container">
    <ion-spinner name="crescent"></ion-spinner>
    <p>Loading timeline data...</p>
  </div>

  <div #timelineContainer class="timeline-container" *ngIf="!isLoading"></div>
</ion-content>

<style>
.timeline-controls {
  padding: 16px;
  background: var(--ion-color-light);
}

.timeline-container {
  height: calc(100vh - 300px);
  width: 100%;
  min-height: 400px;
}

.loading-container {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  height: 50vh;
}

/* Timeline event styling */
:global(.vis-item.normal-event) {
  background-color: var(--ion-color-primary);
  border-color: var(--ion-color-primary-shade);
}

:global(.vis-item.archived-event) {
  background-color: var(--ion-color-secondary);
  border-color: var(--ion-color-secondary-shade);
}

:global(.vis-timeline) {
  border: 1px solid var(--ion-color-medium);
}
</style>
